# CVAT 汉化任务分工方案

## 子代理分工设计

将汉化工作分配给 **6 个子代理**，每个子代理负责一个独立区域，可并行执行。

---

## 子代理 1：核心标注界面
**负责目录**: `cvat-ui/src/components/annotation-page/`

**优先级**: ⭐⭐⭐⭐⭐ (最高)

**文件范围**:
- `annotation-page.tsx` - 主页面
- `top-bar/` - 顶部工具栏（菜单、保存、撤销等）
- `standard-workspace/` - 标准工作区
  - `controls-side-bar/` - 左侧工具栏（矩形、多边形、画笔等）
  - `objects-side-bar/` - 右侧对象面板
  - `canvas-context-menu/` - 右键菜单
- `canvas/` - 画布相关
- `review/` - 审核相关

**核心词汇表**:
| 英文 | 中文 |
|------|------|
| Save | 保存 |
| Undo | 撤销 |
| Redo | 重做 |
| Menu | 菜单 |
| Fullscreen | 全屏 |
| Rectangle | 矩形 |
| Polygon | 多边形 |
| Polyline | 折线 |
| Points | 点 |
| Ellipse | 椭圆 |
| Cuboid | 立方体 |
| Skeleton | 骨架 |
| Brush | 画笔 |
| Eraser | 橡皮擦 |
| Mask | 掩码 |
| Split | 分割 |
| Merge | 合并 |
| Group | 分组 |
| Track | 轨迹 |
| Shape | 形状 |
| Tag | 标签 |
| Objects | 对象 |
| Labels | 标签 |
| Issues | 问题 |
| Appearance | 外观 |
| Opacity | 不透明度 |
| Color by | 颜色依据 |
| Instance | 实例 |
| Fit image | 适应图像 |
| Rotate | 旋转 |
| Move | 移动 |
| Cursor | 光标 |

**交互消息**:
| 英文 | 中文 |
|------|------|
| No labels | 没有标签 |
| Some objects were deleted | 部分对象已删除 |
| Image processing error occurred | 图像处理错误 |
| OpenCV.js processing error occurred | OpenCV.js 处理错误 |
| Could not initialize OpenCV library | 无法初始化 OpenCV 库 |
| Job state updated | 作业状态已更新 |
| You tagged the job as completed | 您已将作业标记为已完成 |

---

## 子代理 2：任务管理界面
**负责目录**:
- `cvat-ui/src/components/tasks-page/`
- `cvat-ui/src/components/task-page/`
- `cvat-ui/src/components/create-task-page/`

**优先级**: ⭐⭐⭐⭐

**核心词汇表**:
| 英文 | 中文 |
|------|------|
| Create a new task | 创建新任务 |
| Tasks | 任务 |
| Search | 搜索 |
| Sort by | 排序 |
| Filter | 过滤 |
| Clear filters | 清除过滤 |
| Actions | 操作 |
| Delete | 删除 |
| Export | 导出 |
| Import | 导入 |
| Basic configuration | 基本配置 |
| Name | 名称 |
| Project | 项目 |
| Select project | 选择项目 |
| Labels | 标签 |
| Add label | 添加标签 |
| Select files | 选择文件 |
| My computer | 我的电脑 |
| Remote sources | 远程源 |
| Cloud Storage | 云存储 |
| Advanced configuration | 高级配置 |
| Quality | 质量 |
| Submit | 提交 |
| Cancel | 取消 |
| Back to tasks | 返回任务列表 |
| Task description | 任务描述 |
| Assigned to | 分配给 |
| Created by | 创建者 |
| Created on | 创建于 |
| Updated on | 更新于 |
| Frame count | 帧数 |
| Frame range | 帧范围 |
| Stage | 阶段 |
| State | 状态 |
| Duration | 时长 |

**交互消息**:
| 英文 | 中文 |
|------|------|
| The task has been created | 任务已创建 |
| Could not create a task | 无法创建任务 |
| Task name cannot be empty | 任务名称不能为空 |
| A task must contain at least one file | 任务必须包含至少一个文件 |
| Task parameters were automatically updated | 任务参数已自动更新 |
| Reached progress will be lost. Continue? | 已达到的进度将丢失。是否继续？ |

---

## 子代理 3：项目和作业界面
**负责目录**:
- `cvat-ui/src/components/projects-page/`
- `cvat-ui/src/components/project-page/`
- `cvat-ui/src/components/create-project-page/`
- `cvat-ui/src/components/jobs-page/`
- `cvat-ui/src/components/job-item/`
- `cvat-ui/src/components/create-job-page/`
- `cvat-ui/src/components/models-page/` - 模型页面
- `cvat-ui/src/components/requests-page/` - 请求页面
- `cvat-ui/src/components/analytics-report/` - 分析报告

**优先级**: ⭐⭐⭐

**核心词汇表**:
| 英文 | 中文 |
|------|------|
| Projects | 项目 |
| Jobs | 作业 |
| Create project | 创建项目 |
| Create job | 创建作业 |
| Job type | 作业类型 |
| Ground truth | 真值 |
| Consensus | 共识 |
| new | 新建 |
| in progress | 进行中 |
| completed | 已完成 |
| rejected | 已拒绝 |
| annotation | 标注 |
| validation | 验证 |
| acceptance | 验收 |

**交互消息**:
| 英文 | 中文 |
|------|------|
| The project has been created | 项目已创建 |
| Please, specify a name | 请输入名称 |
| Please, specify Job type | 请指定作业类型 |
| Please, specify frame selection method | 请指定帧选择方法 |

---

## 子代理 4：用户认证和设置
**负责目录**:
- `cvat-ui/src/components/login-page/`
- `cvat-ui/src/components/register-page/`
- `cvat-ui/src/components/reset-password-page/`
- `cvat-ui/src/components/reset-password-confirm-page/`
- `cvat-ui/src/components/header/` (包括 settings-modal)
- `cvat-ui/src/components/organization-page/`
- `cvat-ui/src/components/profile-page/` - 个人资料
- `cvat-ui/src/components/invitations-page/` - 邀请页面
- `cvat-ui/src/components/email-confirmation-pages/` - 邮件确认
- `cvat-ui/src/components/shortcuts-dialog/` - 快捷键对话框
- `cvat-ui/src/components/signing-common/` - 登录注册通用组件

**优先级**: ⭐⭐⭐

**核心词汇表**:
| 英文 | 中文 |
|------|------|
| Sign in | 登录 |
| Sign up | 注册 |
| Log out | 退出登录 |
| Username | 用户名 |
| Password | 密码 |
| Email | 邮箱 |
| First name | 名字 |
| Last name | 姓氏 |
| Forgot password | 忘记密码 |
| Reset password | 重置密码 |
| Settings | 设置 |
| Player | 播放器 |
| Workspace | 工作区 |
| Shortcuts | 快捷键 |
| Organization | 组织 |
| Members | 成员 |
| Invite | 邀请 |

**交互消息**:
| 英文 | 中文 |
|------|------|
| Please specify a username | 请输入用户名 |
| Please specify an email address | 请输入邮箱地址 |
| The input is not valid E-mail! | 输入的邮箱格式不正确！ |
| Password must have at least 8 characters | 密码至少需要8个字符 |
| Please input your password! | 请输入您的密码！ |
| Failed to load settings from local storage | 从本地存储加载设置失败 |

---

## 子代理 5：云存储和导入导出
**负责目录**:
- `cvat-ui/src/components/cloud-storages-page/`
- `cvat-ui/src/components/create-cloud-storage-page/`
- `cvat-ui/src/components/update-cloud-storage-page/` - 更新云存储
- `cvat-ui/src/components/export-dataset/`
- `cvat-ui/src/components/export-backup/`
- `cvat-ui/src/components/import-dataset/`
- `cvat-ui/src/components/import-backup/`
- `cvat-ui/src/components/file-manager/`
- `cvat-ui/src/components/storage/` - 存储相关
- `cvat-ui/src/components/select-cloud-storage/` - 选择云存储

**优先级**: ⭐⭐

**核心词汇表**:
| 英文 | 中文 |
|------|------|
| Cloud Storages | 云存储 |
| Provider | 提供商 |
| AWS S3 | AWS S3 |
| Azure Blob | Azure Blob |
| Google Cloud | Google Cloud |
| Bucket name | 存储桶名称 |
| Access key | 访问密钥 |
| Secret key | 秘密密钥 |
| Region | 区域 |
| Export dataset | 导出数据集 |
| Import dataset | 导入数据集 |
| Export backup | 导出备份 |
| Import backup | 导入备份 |
| Format | 格式 |
| File manager | 文件管理器 |

**交互消息**:
| 英文 | 中文 |
|------|------|
| The cloud storage has been attached | 云存储已连接 |
| The cloud storage has been updated | 云存储已更新 |
| Please, specify a bucket name | 请输入存储桶名称 |
| Please, specify your access key ID | 请输入您的访问密钥 ID |
| Only ZIP archive is supported | 仅支持 ZIP 压缩包 |
| Format must be selected | 必须选择格式 |
| Bulk backup export started | 批量备份导出已开始 |

---

## 子代理 6：通用组件和工具函数
**负责目录**:
- `cvat-ui/src/components/common/`
- `cvat-ui/src/components/labels-editor/`
- `cvat-ui/src/components/model-runner-modal/`
- `cvat-ui/src/components/move-task-modal/`
- `cvat-ui/src/components/webhooks-page/`
- `cvat-ui/src/components/setup-webhook-pages/` - 设置 Webhook
- `cvat-ui/src/components/quality-control/`
- `cvat-ui/src/components/consensus-management-page/`
- `cvat-ui/src/components/label-selector/` - 标签选择器
- `cvat-ui/src/components/md-guide/` - Markdown 指南
- `cvat-ui/src/components/global-error-boundary/` - 全局错误边界
- `cvat-ui/src/components/resource-sorting-filtering/` - 资源排序过滤
- `cvat-ui/src/components/paid-feature-placeholder/` - 付费功能占位
- `cvat-ui/src/utils/validation-rules.ts`
- `cvat-ui/src/utils/validation-patterns.ts`

**优先级**: ⭐⭐

**核心词汇表**:
| 英文 | 中文 |
|------|------|
| OK | 确定 |
| Cancel | 取消 |
| Submit | 提交 |
| Save | 保存 |
| Delete | 删除 |
| Edit | 编辑 |
| Create | 创建 |
| Update | 更新 |
| Close | 关闭 |
| Open | 打开 |
| Yes | 是 |
| No | 否 |
| Confirm | 确认 |
| Loading | 加载中 |
| Error | 错误 |
| Warning | 警告 |
| Success | 成功 |
| Failed | 失败 |
| Models | 模型 |
| Webhooks | Webhooks |
| Quality | 质量 |
| Consensus | 共识 |

**交互消息**:
| 英文 | 中文 |
|------|------|
| Settings have been updated | 设置已更新 |
| Could not save quality settings | 无法保存质量设置 |
| This action cannot be undone | 此操作无法撤销 |
| Please, select a project | 请选择一个项目 |
| Could not update the task | 无法更新任务 |
| Invalid name | 名称无效 |
| URL is not valid | URL 无效 |
| The field is required | 此字段为必填项 |

---

## 汉化规则（所有子代理必须遵守）

### ✅ 可以修改
1. JSX 中的纯文本：`<span>Save</span>` → `<span>保存</span>`
2. placeholder 属性：`placeholder="Search"` → `placeholder="搜索"`
3. title 属性：`title="Delete"` → `title="删除"`
4. notification/message 的文本参数
5. Modal.confirm 的 title/content
6. 表单验证的 message

### ❌ 绝对不能修改
1. 变量名：`const saveButton` 保持不变
2. 函数名：`handleSave()` 保持不变
3. 组件名：`<SaveButton>` 保持不变
4. CSS 类名：`className="save-btn"` 保持不变
5. API 路径：`/api/tasks` 保持不变
6. 枚举值：`state: 'completed'` 保持不变
7. 占位符：保留 `${taskID}`、`{count}` 等

### 汉化示例

```tsx
// ✅ 正确
<Button>Save</Button>  →  <Button>保存</Button>
<Input placeholder="Search" />  →  <Input placeholder="搜索" />
notification.success({ message: 'Task created' })  →  notification.success({ message: '任务已创建' })

// ❌ 错误 - 不要改变量名
const saveTask = () => {}  // 保持不变，不要改成 const 保存任务
```

---

## 执行流程

```
┌─────────────────────────────────────────────────────────────┐
│                    并行执行 6 个子代理                        │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌─────────┐ ┌─────────┐ ┌─────────┐                       │
│  │子代理 1 │ │子代理 2 │ │子代理 3 │                       │
│  │标注界面 │ │任务管理 │ │项目作业 │                       │
│  └────┬────┘ └────┬────┘ └────┬────┘                       │
│       │           │           │                             │
│  ┌─────────┐ ┌─────────┐ ┌─────────┐                       │
│  │子代理 4 │ │子代理 5 │ │子代理 6 │                       │
│  │用户认证 │ │云存储   │ │通用组件 │                       │
│  └────┬────┘ └────┬────┘ └────┬────┘                       │
│       │           │           │                             │
│       └───────────┴───────────┘                             │
│                   │                                         │
│                   ▼                                         │
│         ┌─────────────────┐                                │
│         │  汇总检查遗漏   │                                │
│         └────────┬────────┘                                │
│                  │                                         │
│                  ▼                                         │
│         ┌─────────────────┐                                │
│         │ docker-compose  │                                │
│         │ build cvat_ui   │                                │
│         └────────┬────────┘                                │
│                  │                                         │
│                  ▼                                         │
│         ┌─────────────────┐                                │
│         │ 浏览器验证效果  │                                │
│         └─────────────────┘                                │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

---

## 子代理调用示例（Claude Code）

```
# 启动 6 个子代理并行执行
Task(subagent_type="general-purpose", prompt="汉化子代理1任务...")
Task(subagent_type="general-purpose", prompt="汉化子代理2任务...")
Task(subagent_type="general-purpose", prompt="汉化子代理3任务...")
Task(subagent_type="general-purpose", prompt="汉化子代理4任务...")
Task(subagent_type="general-purpose", prompt="汉化子代理5任务...")
Task(subagent_type="general-purpose", prompt="汉化子代理6任务...")
```

每个子代理的 prompt 应包含：
1. 负责的目录列表
2. 该区域的词汇表
3. 该区域的交互消息表
4. 汉化规则
5. 明确指示：只修改文件，不要输出解释

---

## 验收标准

每个子代理完成后应报告：
1. 修改了哪些文件
2. 替换了多少处文本
3. 是否遇到不确定的翻译

最终验收：
1. `docker-compose build cvat_ui` 构建成功
2. 浏览器访问 http://localhost:8080 界面显示中文
3. 核心功能（创建任务、标注、保存）正常工作
