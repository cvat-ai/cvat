# CVAT 汉化对照表 - 第6部分：汉化注意事项和工作流程

## 核心原则：只汉化用户可见部分

### 可以汉化的内容
1. **JSX 标签内的文本**：`<span>Save</span>` → `<span>保存</span>`
2. **placeholder 属性**：`placeholder="Search"` → `placeholder="搜索"`
3. **title 属性**：`title="Delete"` → `title="删除"`
4. **message 字符串**：`message: 'Error'` → `message: '错误'`
5. **description 字符串**：`description: 'Go to next'` → `description: '转到下一个'`
6. **notification 消息**：`notification.error({ message: 'Failed' })` → `notification.error({ message: '失败' })`

### 绝对不能修改的内容
1. **变量名**：`const saveButton` ❌ 不能改成 `const 保存按钮`
2. **函数名**：`function handleSave()` ❌ 不能改
3. **属性名**：`{ message: '...' }` 中的 `message` ❌ 不能改
4. **组件名**：`<Button>` ❌ 不能改成 `<按钮>`
5. **CSS 类名**：`className="cvat-save-btn"` ❌ 不能改
6. **import/export 语句**：❌ 完全不能动
7. **API 路径**：`/api/tasks` ❌ 不能改
8. **事件名**：`onClick`, `onChange` ❌ 不能改
9. **状态值（用于逻辑判断的）**：如 `state === 'new'` 中的 `'new'` ❌ 不能改

### 特殊情况处理

#### 带变量的字符串
```tsx
// 原文
message: `Could not delete task #${taskID}`

// 汉化后 - 保留 ${taskID} 变量
message: `无法删除任务 #${taskID}`
```

#### 带链接的字符串
```tsx
// 原文
message: 'Click [here](/tasks) to view'

// 汉化后 - 保留链接格式
message: '点击[这里](/tasks)查看'
```

#### 条件渲染的文本
```tsx
// 原文
{isLoading ? 'Loading...' : 'Submit'}

// 汉化后
{isLoading ? '加载中...' : '提交'}
```

---

## 完整工作流程

### 步骤 1：备份代码
```bash
cd d:\OneDrive\steven\code\5\cvat-develop
git add .
git commit -m "备份：汉化前的代码状态"
```

### 步骤 2：按优先级汉化文件

**优先级 1：核心界面**
1. `cvat-ui/src/components/header/header.tsx` - 顶部导航
2. `cvat-ui/src/components/annotation-page/top-bar/` - 标注工具栏
3. `cvat-ui/src/components/annotation-page/standard-workspace/` - 标注界面

**优先级 2：任务管理**
4. `cvat-ui/src/components/tasks-page/` - 任务列表
5. `cvat-ui/src/components/create-task-page/` - 创建任务
6. `cvat-ui/src/components/task-page/` - 任务详情

**优先级 3：通知消息**
7. `cvat-ui/src/reducers/notifications-reducer.ts` - 所有通知消息

**优先级 4：其他页面**
8. `cvat-ui/src/components/login-page/` - 登录
9. `cvat-ui/src/components/register-page/` - 注册
10. `cvat-ui/src/components/projects-page/` - 项目
11. `cvat-ui/src/components/jobs-page/` - 作业

### 步骤 3：重新构建 Docker 镜像
```bash
cd d:\OneDrive\steven\code\5\cvat-develop
docker-compose build cvat_ui
```

### 步骤 4：重启容器
```bash
docker-compose up -d cvat_ui
```

### 步骤 5：验证结果
1. 清除浏览器缓存（Ctrl+Shift+R）
2. 访问 http://localhost:8080
3. 检查界面是否显示中文

---

## 汉化文档清单

本次生成的汉化对照文档：

| 文件名 | 内容 |
|-------|------|
| 汉化对照表_01_通知消息.md | notification 消息（约 100 条） |
| 汉化对照表_02_输入框提示.md | placeholder 文本（约 60 条） |
| 汉化对照表_03_工具提示.md | tooltip/title 文本（约 80 条） |
| 汉化对照表_04_表单验证和快捷键.md | 表单验证消息和快捷键描述 |
| 汉化对照表_05_界面静态文本.md | 按钮、菜单、标签等静态文本 |
| 汉化对照表_06_注意事项.md | 本文档 |

---

## 给 AI 的汉化指令模板

如果你要让另一个 AI 执行汉化，可以使用以下指令：

```
请帮我汉化 CVAT 前端界面。

项目路径：d:\OneDrive\steven\code\5\cvat-develop
前端源码：cvat-ui/src/components/

汉化规则：
1. 只修改用户可见的英文字符串（JSX 文本、placeholder、title、message 等）
2. 绝对不能修改变量名、函数名、组件名、CSS 类名、API 路径
3. 保留字符串���的变量占位符如 ${taskID}
4. 参考 docs/ 目录下的汉化对照表文档

请从以下文件开始汉化：
1. cvat-ui/src/components/header/header.tsx
2. cvat-ui/src/reducers/notifications-reducer.ts

汉化完成后，我会执行：
docker-compose build cvat_ui
docker-compose up -d cvat_ui
```

---

## 常见问题

### Q: 汉化后构建失败怎么办？
A: 检查是否误改了变量名或语法。用 `git diff` 查看修改，用 `git checkout -- <file>` 恢复单个文件。

### Q: 汉化后界面没变化？
A: 清除浏览器缓存，或使用无痕模式访问。

### Q: 如何只汉化部分内容？
A: 可以分批汉化，每次汉化后都可以构建测试。

### Q: 升级 CVAT 后汉化会丢失吗？
A: 是的，升级后需要重新汉化。建议用 git 分支管理汉化版本。
