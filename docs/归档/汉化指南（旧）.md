# CVAT 界面汉化指南

## 工作流程概览

```
┌─────────────────────────────────────────────────────────────────┐
│                    CVAT 汉化工作流程                              │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  第1步: 修改源码                                                 │
│  ├── 位置: cvat-ui/src/components/                              │
│  ├── 文件类型: .tsx (React 组件)                                 │
│  └── 操作: 将英文字符串替换为中文                                  │
│                                                                 │
│           ↓                                                     │
│                                                                 │
│  第2步: 重新构建 Docker 镜像                                      │
│  ├── 命令: docker-compose build cvat_ui                         │
│  └── 耗时: 约 5-10 分钟                                          │
│                                                                 │
│           ↓                                                     │
│                                                                 │
│  第3步: 重启容器                                                  │
│  ├── 命令: docker-compose up -d cvat_ui                         │
│  └── 耗时: 约 30 秒                                              │
│                                                                 │
│           ↓                                                     │
│                                                                 │
│  第4步: 验证结果                                                  │
│  ├── 访问: http://localhost:8080                                │
│  └── 检查界面是否显示中文                                         │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

## 详细执行步骤

### 步骤 1: 进入项目目录
```bash
cd d:\OneDrive\steven\code\5\cvat-develop
```

### 步骤 2: 汉化源码文件
按优先级顺序汉化以下目录中的 `.tsx` 文件：

1. `cvat-ui/src/components/header/` - 顶部导航
2. `cvat-ui/src/components/annotation-page/` - 标注界面（最重要）
3. `cvat-ui/src/components/tasks-page/` - 任务列表
4. `cvat-ui/src/components/create-task-page/` - 创建任务
5. `cvat-ui/src/components/task-page/` - 任务详情

### 步骤 3: 重新构建镜像
```bash
docker-compose build cvat_ui
```

### 步骤 4: 重启容器
```bash
docker-compose up -d cvat_ui
```

### 步骤 5: 清除浏览器缓存并访问
- 按 `Ctrl+Shift+R` 强制刷新
- 或清除浏览器缓存后访问 http://localhost:8080

---

## 项目背景
CVAT (Computer Vision Annotation Tool) 是一个视频/图像标注工具，目前界面全是英文。本文档指导如何进行硬编码汉化。

## 技术栈
- 前端：React + TypeScript
- UI 库：Ant Design 5.x
- 源码位置：`cvat-ui/src/`
- 组件文件：`.tsx` 文件，共 326 个

## 汉化原理
直接在 React 组件源码中，将英文字符串替换为中文。不使用 i18n 框架。

## 汉化步骤

### 第一步：汉化核心界面（优先级最高）

#### 1.1 顶部导航栏
文件：`cvat-ui/src/components/header/header.tsx`

| 英文 | 中文 |
|------|------|
| Projects | 项目 |
| Tasks | 任务 |
| Jobs | 作业 |
| Cloud Storages | 云存储 |
| Requests | 请求 |
| Analytics | 分析 |
| Models | 模型 |
| Guide | 指南 |

#### 1.2 标注界面顶部工具栏
文件：`cvat-ui/src/components/annotation-page/top-bar/`

| 英文 | 中文 |
|------|------|
| Menu | 菜单 |
| Save | 保存 |
| Undo | 撤销 |
| Redo | 重做 |
| Fullscreen | 全屏 |
| Info | 信息 |
| Filters | 过滤器 |
| Standard | 标准 |

#### 1.3 标注界面右侧面板
文件：`cvat-ui/src/components/annotation-page/standard-workspace/objects-side-bar/`

| 英文 | 中文 |
|------|------|
| Objects | 对象 |
| Labels | 标签 |
| Issues | 问题 |
| Items | 项目 |
| Sort by | 排序 |
| Appearance | 外观 |
| Color by | 颜色依据 |
| Label | 标签 |
| Instance | 实例 |
| Group | 分组 |
| Opacity | 不透明度 |
| Selected opacity | 选中不透明度 |
| Outlined borders | 轮廓边框 |
| Show bitmap | 显示位图 |
| Show projections | 显示投影 |

#### 1.4 标注界面左侧工具栏
文件：`cvat-ui/src/components/annotation-page/standard-workspace/controls-side-bar/`

| 英文 | 中文 |
|------|------|
| Cursor | 光标 |
| Move | 移动 |
| Rotate | 旋转 |
| Fit image | 适应图像 |
| Select region | 选择区域 |
| Rectangle | 矩形 |
| Polygon | 多边形 |
| Polyline | 折线 |
| Points | 点 |
| Ellipse | 椭圆 |
| Cuboid | 立方体 |
| Skeleton | 骨架 |
| Tag | 标签 |
| Brush | 画笔 |
| Eraser | 橡皮擦 |
| Mask | 掩码 |
| Split | 分割 |
| Merge | 合并 |
| Group | 分组 |

### 第二步：汉化任务管理界面

#### 2.1 任务列表页
文件：`cvat-ui/src/components/tasks-page/`

| 英文 | 中文 |
|------|------|
| Create a new task | 创建新任务 |
| Search | 搜索 |
| Sort by | 排序 |
| Filter | 过滤 |
| Clear filters | 清除过滤 |
| Actions | 操作 |
| Delete | 删除 |
| Export | 导出 |
| Import | 导入 |

#### 2.2 创建任务对话框
文件：`cvat-ui/src/components/create-task-page/`

| 英文 | 中文 |
|------|------|
| Basic configuration | 基本配置 |
| Name | 名称 |
| Project | 项目 |
| Select project | 选择项目 |
| Labels | 标签 |
| Constructor | 构造器 |
| Raw | 原始 |
| Add label | 添加标签 |
| Setup skeleton | 设置骨架 |
| From model | 从模型 |
| Select files | 选择文件 |
| My computer | 我的电脑 |
| Connected file share | 连接的文件共享 |
| Remote sources | 远程源 |
| Cloud Storage | 云存储 |
| Advanced configuration | 高级配置 |
| Quality | 质量 |
| Submit | 提交 |
| Cancel | 取消 |

#### 2.3 任务详情页
文件：`cvat-ui/src/components/task-page/`

| 英文 | 中文 |
|------|------|
| Back to tasks | 返回任务列表 |
| Task description | 任务描述 |
| Assigned to | 分配给 |
| Select a user | 选择用户 |
| Issue Tracker | 问题追踪 |
| Created by | 创建者 |
| Created on | 创建于 |
| Updated on | 更新于 |
| Frame count | 帧数 |
| Frame range | 帧范围 |
| Stage | 阶段 |
| State | 状态 |
| Duration | 时长 |

### 第三步：汉化作业状态

| 英文 | 中文 |
|------|------|
| new | 新建 |
| in progress | 进行中 |
| completed | 已完成 |
| rejected | 已拒绝 |
| annotation | 标注 |
| validation | 验证 |
| acceptance | 验收 |

### 第四步：汉化通用按钮和提示

| 英文 | 中文 |
|------|------|
| OK | 确定 |
| Cancel | 取消 |
| Submit | 提交 |
| Save | 保存 |
| Delete | 删除 |
| Edit | 编辑 |
| Create | 创建 |
| Update | 更新 |
| Close | 关闭 |
| Open | 打开 |
| Yes | 是 |
| No | 否 |
| Confirm | 确认 |
| Loading | 加载中 |
| Error | 错误 |
| Warning | 警告 |
| Success | 成功 |
| Failed | 失败 |

## 汉化方法

### 方法一：直接字符串替换
在 `.tsx` 文件中找到英文字符串，直接替换为中文。

示例：
```tsx
// 修改前
<span>Save</span>

// 修改后
<span>保存</span>
```

### 方法二：替换 Ant Design 组件的文本
```tsx
// 修改前
<Button>Submit</Button>

// 修改后
<Button>提交</Button>
```

### 方法三：替换 placeholder 和 title
```tsx
// 修改前
<Input placeholder="Search" />

// 修改后
<Input placeholder="搜索" />
```

## 需要汉化的主要目录

按优先级排序：

1. `cvat-ui/src/components/annotation-page/` - 标注界面（最重要）
2. `cvat-ui/src/components/header/` - 顶部导航
3. `cvat-ui/src/components/tasks-page/` - 任务列表
4. `cvat-ui/src/components/create-task-page/` - 创建任务
5. `cvat-ui/src/components/task-page/` - 任务详情
6. `cvat-ui/src/components/jobs-page/` - 作业列表
7. `cvat-ui/src/components/projects-page/` - 项目列表
8. `cvat-ui/src/components/login-page/` - 登录页
9. `cvat-ui/src/components/common/` - 通用组件

## 构建和部署

汉化完成后，执行以下命令重新构建：

```bash
# 进入项目根目录
cd d:\OneDrive\steven\code\5\cvat-develop

# 重新构建 cvat_ui 镜像
docker-compose build cvat_ui

# 重启容器
docker-compose up -d cvat_ui
```

## 注意事项

1. **保持代码格式**：只修改字符串内容，不要改变代码结构
2. **保留变量**：如果字符串中有变量如 `{count}`，保留它们
3. **测试**：每汉化一批文件后，建议构建测试一下
4. **备份**：汉化前建议 git commit 保存���前状态

## 快速汉化脚本（可选）

可以使用 sed 或 Node.js 脚本批量替换，但建议谨慎使用：

```bash
# 示例：批量替换 Save 为 保存
find cvat-ui/src -name "*.tsx" -exec sed -i 's/>Save</>保存</g' {} \;
```

## 汉化进度检查

可以用 grep 检查还有多少英文需要汉化：

```bash
# 检查常见英文单词
grep -r "Save\|Cancel\|Submit\|Delete" cvat-ui/src/components/ --include="*.tsx"
```

---

## 第五步：汉化交互消息和通知（重要补充）

### 5.1 通知消息 (notification)

文件位置及对应消息：

| 文件路径 | 英文消息 | 中文翻译 |
|---------|---------|---------|
| `components/consensus-management-page/consensus-management-page.tsx` | Settings have been updated | 设置已更新 |
| `components/consensus-management-page/consensus-settings-tab.tsx` | Could not save consensus settings | 无法保存共识设置 |
| `components/quality-control/quality-control-page.tsx` | Settings have been updated | 设置已更新 |
| `components/quality-control/quality-control-page.tsx` | Could not save quality settings | 无法保存质量设置 |
| `components/create-cloud-storage-page/cloud-storage-form.tsx` | The cloud storage has been attached | 云存储已连接 |
| `components/create-cloud-storage-page/cloud-storage-form.tsx` | The cloud storage has been updated | 云存储已更新 |
| `components/create-project-page/create-project-content.tsx` | The project has been created | 项目已创建 |
| `components/create-task-page/create-task-content.tsx` | Could not create a task | 无法创建任务 |
| `components/create-task-page/create-task-content.tsx` | The task has been created | 任务已创建 |
| `components/create-task-page/create-task-content.tsx` | The tasks have been created | 任务已创建 |
| `components/create-task-page/create-task-content.tsx` | Task parameters were automatically updated | 任务参数已自动更新 |
| `components/create-task-page/create-task-content.tsx` | A task must contain at least one file | 任务必须包含至少一个文件 |
| `components/export-backup/export-backup-modal.tsx` | Bulk backup export started | 批量备份导出已开始 |
| `components/annotation-page/annotation-page.tsx` | No labels | 没有标签 |
| `components/annotation-page/top-bar/right-group.tsx` | Could not receive annotation guide | 无法获取标注指南 |
| `components/annotation-page/canvas/views/canvas2d/brush-tools.tsx` | Some objects were deleted | 部分对象已删除 |
| `components/annotation-page/canvas/views/canvas2d/canvas-wrapper.tsx` | Image processing error occurred | 图像处理错误 |
| `components/move-task-modal/move-task-modal.tsx` | Please, select a project | 请选择一个项目 |
| `components/move-task-modal/move-task-modal.tsx` | Please, specify mapping for all the labels | 请为所有标签指定映射 |
| `components/move-task-modal/move-task-modal.tsx` | Could not update the task | 无法更新任务 |
| `components/move-task-modal/move-task-modal.tsx` | Could not fetch task from the server | 无法从服务器获取任务 |
| `components/model-runner-modal/model-runner-dialog.tsx` | Could not get task details | 无法获取任务详情 |
| `components/model-runner-modal/detector-runner.tsx` | This model does not have specified labels | 此模型没有指定的标签 |
| `components/header/settings-modal/settings-modal.tsx` | Failed to load settings from local storage | 从本地存储加载设置失败 |
| `components/import-backup/import-backup-modal.tsx` | No backup file specified | 未指定备份文件 |
| `components/annotation-page/standard-workspace/controls-side-bar/opencv-control.tsx` | OpenCV.js processing error occurred | OpenCV.js 处理错误 |
| `components/annotation-page/standard-workspace/controls-side-bar/opencv-control.tsx` | Could not initialize OpenCV library | 无法初始化 OpenCV 库 |
| `components/annotation-page/standard-workspace/controls-side-bar/tools-control.tsx` | Probably, you should consider updating the serverless function | 可能需要更新无服务器函数 |

### 5.2 消息提示 (message)

| 文件路径 | 英文消息 | 中文翻译 |
|---------|---------|---------|
| `components/annotation-page/top-bar/annotation-menu.tsx` | Job state updated | 作业状态已更新 |
| `components/annotation-page/standard-workspace/objects-side-bar/labels-list.tsx` | Default label has been changed to "${label.name}" | 默认标签已更改为 "${label.name}" |
| `components/import-dataset/import-dataset-modal.tsx` | Please select a format first | 请先选择格式 |
| `components/import-dataset/import-dataset-modal.tsx` | Only ZIP archive is supported for import a dataset | 仅支持 ZIP 压缩包导入数据集 |
| `components/import-backup/import-backup-modal.tsx` | Only ZIP archive is supported | 仅支持 ZIP 压缩包 |

### 5.3 模态框确认消息 (Modal.confirm)

| 文件路径 | 英文消息 | 中文翻译 |
|---------|---------|---------|
| `components/annotation-page/top-bar/annotation-menu.tsx` | You tagged the job as completed | 您已将作业标记为已完成 |
| `components/annotation-page/top-bar/annotation-menu.tsx` | It will save annotations and set the job state to "completed" | 这将保存标注并将作业状态设置为"已完成" |
| `components/annotation-page/top-bar/player-navigation.tsx` | The frame will not be visible in navigation and exported datasets, but it still can be restored with all the annotations. | 该帧将不会在导航和导出的数据集中显示，但仍可以恢复所有标注。 |
| `components/labels-editor/labels-editor.tsx` | This action cannot be undone. All annotations associated to the label will be deleted. | 此操作无法撤销。与该标签关联的所有标注将被删除。 |
| `components/labels-editor/label-form.tsx` | This action cannot be undone. All annotations associated to the attribute will be removed | 此操作无法撤销。与该属性关联的所有标注将被移除 |
| `components/jobs-page/actions-menu.tsx` | Existing annotations in the parent job will be updated. Continue? | 父作业中的现有标注将被更新。是否继续？ |
| `components/tasks-page/actions-menu.tsx` | Existing annotations in parent jobs will be updated. Continue? | 父作业中的现有标注将被更新。是否继续？ |
| `components/tasks-page/automatic-annotation-progress.tsx` | Reached progress will be lost. Continue? | 已达到的进度将丢失。是否继续？ |
| `components/webhooks-page/actions-menu.tsx` | They will stop notifying the specified URLs about listed events | 它们将停止向指定的 URL 通知列出的事件 |
| `components/webhooks-page/actions-menu.tsx` | It will stop notificating the specified URL about listed events | 它将停止向指定的 URL 通知列出的事件 |
| `components/organization-page/actions-menu.tsx` | The person will not have access to the organization data anymore. Continue? | 此人将无法再访问组织数据。是否继续？ |
| `components/quality-control/quality-settings-tab.tsx` | This action will override own settings in all tasks. | 此操作将覆盖所有任务中的自有设置。 |
| `components/task-page/bug-tracker-editor.tsx` | Issue tracker is expected to be URL | 问题追踪器应为 URL |
| `components/header/settings-modal/multiple-shortcuts-display.tsx` | Only one non-modifier key can be used in a combination | 组合键中只能使用一个非修饰键 |

### 5.4 表单验证消息

| 文件路径 | 英文消息 | 中文翻译 |
|---------|---------|---------|
| `utils/validation-rules.ts` | Please specify a first name | 请输入名字 |
| `utils/validation-rules.ts` | Please specify a last name | 请输入姓氏 |
| `utils/validation-rules.ts` | The input is not valid E-mail! | 输入的邮箱格式不正确！ |
| `utils/validation-rules.ts` | Please specify an email address | 请输入邮箱地址 |
| `utils/validation-rules.ts` | Please specify a username | 请输入用户名 |
| `utils/validation-patterns.ts` | Password must have at least 8 characters | 密码至少需要8个字符 |
| `utils/validation-patterns.ts` | Password must have at least 1 numeric characters | 密码至少需要1个数字 |
| `utils/validation-patterns.ts` | Password must have at least 1 uppercase alphabetical character | 密码至少需要1个大写字母 |
| `utils/validation-patterns.ts` | Password must have at least 1 lowercase alphabetical character | 密码至少需要1个小写字母 |
| `utils/validation-patterns.ts` | Username must have at least 5 characters | 用户名至少需要5个字符 |
| `utils/validation-patterns.ts` | Only characters (a-z), (A-Z), (0-9), -, _, . are available | 只能使用字符 (a-z)、(A-Z)、(0-9)、-、_、. |
| `utils/validation-patterns.ts` | Invalid name | 名称无效 |
| `utils/validation-patterns.ts` | Invalid attribute value | 属性值无效 |
| `utils/validation-patterns.ts` | URL is not valid | URL 无效 |
| `utils/validation-patterns.ts` | Only Latin characters and numbers are allowed | 只允许使用拉丁字符和数字 |
| `utils/validation-patterns.ts` | Input phone number is not correct | 输入的电话号码不正确 |
| `components/create-task-page/basic-configuration-form.tsx` | Task name cannot be empty | 任务名称不能为空 |
| `components/create-task-page/advanced-configuration-form.tsx` | The field is required. | 此字段为必填项。 |
| `components/create-task-page/quality-configuration-form.tsx` | Please, specify frame selection method | 请指定帧选择方法 |
| `components/create-task-page/quality-configuration-form.tsx` | The field is required | 此字段为必填项 |
| `components/create-task-page/quality-configuration-form.tsx` | Value is not valid | 值无效 |
| `components/create-project-page/create-project-content.tsx` | Please, specify a name | 请输入名称 |
| `components/create-cloud-storage-page/cloud-storage-form.tsx` | Please, specify your access key ID | 请输入您的访问密钥 ID |
| `components/create-cloud-storage-page/cloud-storage-form.tsx` | Please, specify your secret access key | 请输入您的秘密访问密钥 |
| `components/create-cloud-storage-page/cloud-storage-form.tsx` | Please, specify your account name | 请输入您的账户名称 |
| `components/create-cloud-storage-page/cloud-storage-form.tsx` | Please, specify your SAS token | 请输入您的 SAS 令牌 |
| `components/create-cloud-storage-page/cloud-storage-form.tsx` | Please, specify your connection string | 请输入您的连接字符串 |
| `components/create-cloud-storage-page/cloud-storage-form.tsx` | Please, specify a bucket name | 请输入存储桶名称 |
| `components/create-cloud-storage-page/cloud-storage-form.tsx` | Please, specify credentials type | 请指定凭证类型 |
| `components/create-cloud-storage-page/cloud-storage-form.tsx` | Please, specify a container name | 请输入容器名称 |
| `components/create-cloud-storage-page/cloud-storage-form.tsx` | Please, specify a display name | 请输入显示名称 |
| `components/create-cloud-storage-page/cloud-storage-form.tsx` | Please, specify a cloud storage provider | 请指定云存储提供商 |
| `components/create-cloud-storage-page/manifests-manager.tsx` | Please specify a manifest name | 请输入清单名称 |
| `components/create-cloud-storage-page/manifests-manager.tsx` | Manifest file must have .jsonl extension | 清单文件必须具有 .jsonl 扩展名 |
| `components/organization-page/invitation-modal.tsx` | This field is required | 此字段为必填项 |
| `components/organization-page/invitation-modal.tsx` | The input is not a valid email | 输入的邮箱格式不正确 |
| `components/export-dataset/export-dataset-modal.tsx` | Format must be selected | 必须选择格式 |
| `components/annotation-page/review/create-issue-dialog.tsx` | Please, fill out the field | 请填写此字段 |
| `components/reset-password-confirm-page/reset-password-confirm-form.tsx` | Please input new password! | 请输入新密码！ |
| `components/reset-password-confirm-page/reset-password-confirm-form.tsx` | Please confirm your new password! | 请确认您的新密码！ |
| `components/register-page/register-form.tsx` | Please input your password! | 请输入您的密码！ |
| `components/file-manager/cloud-storages-tab.tsx` | Please, specify a data source | 请指定数据源 |
| `components/file-manager/cloud-storages-tab.tsx` | Please, select a files | 请选择文件 |
| `components/create-job-page/job-form.tsx` | Please, specify Job type | 请指定作业类型 |
| `components/create-job-page/job-form.tsx` | Please, specify frame selection method | 请指定帧选择方法 |
| `components/create-job-page/job-form.tsx` | Please, specify quantity | 请指定数量 |
| `components/create-job-page/job-form.tsx` | Please, specify frame count | 请指定帧数 |
| `components/import-backup/import-backup-modal.tsx` | The file is required | 文件为必填项 |
| `components/import-backup/import-backup-modal.tsx` | Please, specify a name | 请输入名称 |

## 联系方式

如有问题，可参考 CVAT 官方文档：https://docs.cvat.ai/
