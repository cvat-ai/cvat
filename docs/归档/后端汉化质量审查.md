# 后端汉化质量审查（Cloud Code 输出）

更新时间：2026-01-06

## 结论（先说结论）

- Cloud Code 对后端的修改**覆盖面很大**，但从 diff 结构与快速静态检查来看：**没有改动业务逻辑/字段名/接口结构**，主要是把异常与校验提示文本翻译为中文。
- 我已做了两类“兜底质量门槛”：
  - **改动类型审查**：变更集中在字符串字面量（`ValidationError`/`PermissionDenied`/`NotFound` 等 message 文本），未发现改动函数/类/条件分支等逻辑行。
  - **语法自检**：对 `cvat/apps/**` 这批被修改的 23 个 `.py` 文件做了 `py_compile` 编译检查，未发现语法错误。

## 改动范围（后端）

被修改的后端文件集中在：

- `cvat/apps/engine/**`（权限、序列化、导入导出、任务/帧等校验）
- `cvat/apps/iam/**`（权限、序列化）
- `cvat/apps/webhooks/**`
- `cvat/apps/redis_handler/**`
- `cvat/apps/quality_control/**`
- `cvat/apps/consensus/**`
- `cvat/apps/lambda_manager/**`
- `cvat/apps/events/export.py`

## 风险点与把控标准（后端汉化“允许/禁止”）

### ✅ 允许汉化（当前改动主要属于这类）

- `ValidationError(...)`/`PermissionDenied(...)`/`NotFound(...)` 的**提示文本**。
- Serializer 的 `help_text`/`label`/`default_error_messages` 的**文本值**。
- 日志/报告导出中“面向人类”的描述字段（不影响机器解析的前提下）。

### ❌ 禁止汉化（如果出现需要回退/修正）

- **接口字段名/JSON key**（例如 `detail`、`results`、`count`、`next` 等必须保持原样）。
- **枚举值/状态码/权限 codename**（例如 `completed`、`accepted`、`run_auto_annotation` 等机器依赖值）。
- **URL/路由/参数名/配置 key**（例如 `filename_pattern`、`Content-Length`、`org` 等）。
- **日志结构化字段名**（会影响下游日志分析/告警）。

## 下一步建议

- 如果你希望把后端汉化也“收敛成高质量可维护”，建议把 Cloud Code 的大范围翻译拆成两层：
  1) **仅异常与校验提示**（当前已做，风险低）
  2) 再逐步覆盖 API 文档/管理端说明等（需要更严格的回归）

## 账号说明（不在对话中回显密码）

- 管理员账号已准备：用户名固定为 `admin`。
- 密码已写入本机文件：`.local/cvat_admin_password.txt`（已加入 `.gitignore`，不会被提交）。

