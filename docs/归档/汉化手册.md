# CVAT 前端汉化手册（开工版）

> 目标：在不改逻辑的前提下，将 `cvat-ui` 用户可见英文替换为中文，并能稳定重建 `cvat_ui` 验证。
> 说明：本仓库采用“硬编码汉化”，不引入 i18n 框架。

## 1. 范围与入口

- 前端源码：`cvat-ui/src/`
- 优先级（建议按批次推进）：
  1) `cvat-ui/src/components/annotation-page/**`（标注页）
  2) `cvat-ui/src/components/header/**`（导航/入口）
  3) `cvat-ui/src/components/tasks-page/**`、`create-task-page/**`、`task-page/**`（任务流）
  4) `cvat-ui/src/reducers/notifications-reducer.ts`（通知）
  5) 其余页面与通用组件（projects/jobs/models/requests/analytics/cloud-storages 等）

## 2. 只能改什么 / 绝对不能改什么

### 2.1 允许修改（用户可见字符串）

- JSX 文本：`<span>Save</span>` → `<span>保存</span>`
- 属性文案：`placeholder="..."`、`title="..."`、`CVATTooltip title="..."`
- 消息文案：`notification.*({ message: '...', description: '...' })`、对象字段 `message:` / `description:`
- 条件渲染文本：`isLoading ? 'Loading...' : 'Submit'`

### 2.2 必须保留（占位符/链接/结构）

- 模板字符串占位符：`` `...${taskID}...` `` 中 `${taskID}` 不可动
- 花括号占位符：`{count}`、`${name}`、`{{id}}` 等格式都要原样保留
- 链接结构：`[Click here](/invitations)` 只翻译可见文字，不改路径与括号结构

### 2.3 绝对禁止修改（高风险）

- 变量名、函数名、组件名
- `className`、CSS 类名/选择器、样式文件结构
- `import` / `export` 语句
- API 路径、路由路径、事件名（`onClick`/`onChange` 等）
- 逻辑判断用字符串常量（例如 `state === 'new'` 里的 `'new'`）

## 3. 统一译法（先定口径再开工）

在正式批量替换前，先统一以下高频词的译法并保持全站一致：

- Projects / Tasks / Jobs / Labels / Issues / Objects
- Save / Undo / Redo / Search / Create / Delete / Cancel / Submit
- Cloud Storages / Requests / Analytics / Models / Guide

## 4. 汉化前必看：英中对照总表

- 主表文件：`docs/汉化对照总表.md`
- 用法建议：
  - 先按 `File` 找到目标文件的小节，再搜索英文原文
  - `File` 为空的条目：在 `cvat-ui/src` 下用 `rg` 搜索英文原文定位真实文件

## 5. 重建与验证（汉化后必须跑）

注意：要触发本地 UI build，必须叠加 `docker-compose.dev.yml`（其中 `cvat_ui` 使用 `Dockerfile.ui`）。

```bash
docker compose -f docker-compose.yml -f docker-compose.dev.yml build cvat_ui
docker compose -f docker-compose.yml -f docker-compose.dev.yml up -d cvat_ui
```

验证：
- 打开 `http://localhost:8080`
- 强刷：`Ctrl+Shift+R`（或无痕模式）

## 6. 开工方式（推荐工作流）

1) 选定批次与目录范围（避免多人冲突）
2) 只做“字符串替换”，每次改动保持可回滚（频繁 `git diff`）
3) 每一批完成后跑一次“重建与验证”
4) 最后做全局扫漏：重点检查 `notification.*`、`title=`、`placeholder=`、`message:`、`description:`

## 7. 常见问题（快速定位）

- 构建失败：通常是误改语法（引号/反引号不配对）、误动了占位符或结构；优先按报错行号回退到“只改字符串”
- 界面没变化：强刷/无痕；确认使用了 `docker-compose.dev.yml` 触发本地 build
- 升级后丢汉化：硬编码方案会丢，需重新迁移；建议后续用脚本或补丁管理

## 8. 归档说明（历史拆分文档）

原先拆分的对照表/分工/协作规范已移动到 `docs/归档/`，根目录只保留“手册 + 总表”，以便开工时不迷路。

