!function(e){var n={};function t(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,t),a.l=!0,a.exports}t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var a in e)t.d(r,a,function(n){return e[n]}.bind(null,a));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=0)}([function(e,n,t){var r,a,i;a=[],void 0===(i="function"==typeof(r=function(){var e;!function(){(e=this)||("undefined"!=typeof window?e=window:"undefined"!=typeof self&&(e=self))}();var n=function(n,t){var r,a=void 0!==a?a:{},i={};for(r in a)a.hasOwnProperty(r)&&(i[r]=a[r]);var o,f=[],u="";u=0!==(u=self.location.href).indexOf("blob:")?u.substr(0,u.lastIndexOf("/")+1):"",o=function(e){var n=new XMLHttpRequest;return n.open("GET",e,!1),n.responseType="arraybuffer",n.send(null),new Uint8Array(n.response)};var s=a.print||console.log.bind(console),c=a.printErr||console.warn.bind(console);for(r in i)i.hasOwnProperty(r)&&(a[r]=i[r]);i=null,a.arguments&&(f=a.arguments),a.thisProgram&&a.thisProgram,a.quit&&a.quit;var d,l,p={"f64-rem":function(e,n){return e%n},debugger:function(){}};new Array(0),a.wasmBinary&&(d=a.wasmBinary),a.noExitRuntime&&a.noExitRuntime,"object"!=typeof WebAssembly&&c("no native wasm support detected");var y,h,v,m,b=new WebAssembly.Table({initial:10,maximum:10,element:"anyfunc"}),g=!1,w="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function A(e,n,t){for(var r=n+t,a=n;e[a]&&!(a>=r);)++a;if(a-n>16&&e.subarray&&w)return w.decode(e.subarray(n,a));for(var i="";n<a;){var o=e[n++];if(128&o){var f=63&e[n++];if(192!=(224&o)){var u=63&e[n++];if((o=224==(240&o)?(15&o)<<12|f<<6|u:(7&o)<<18|f<<12|u<<6|63&e[n++])<65536)i+=String.fromCharCode(o);else{var s=o-65536;i+=String.fromCharCode(55296|s>>10,56320|1023&s)}}else i+=String.fromCharCode((31&o)<<6|f)}else i+=String.fromCharCode(o)}return i}"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le");var M,P=a.TOTAL_MEMORY||104857600;function D(e){for(;e.length>0;){var n=e.shift();if("function"!=typeof n){var t=n.func;"number"==typeof t?void 0===n.arg?a.dynCall_v(t):a.dynCall_vi(t,n.arg):t(void 0===n.arg?null:n.arg)}else n()}}(l=a.wasmMemory?a.wasmMemory:new WebAssembly.Memory({initial:P/65536,maximum:P/65536}))&&(y=l.buffer),P=y.byteLength,y=M=y,a.HEAP8=h=new Int8Array(M),a.HEAP16=new Int16Array(M),a.HEAP32=m=new Int32Array(M),a.HEAPU8=v=new Uint8Array(M),a.HEAPU16=new Uint16Array(M),a.HEAPU32=new Uint32Array(M),a.HEAPF32=new Float32Array(M),a.HEAPF64=new Float64Array(M),m[2748]=5254064;var _=[],S=[],R=[],U=[],E=0,I=null,O=null;function x(e){throw a.onAbort&&a.onAbort(e),s(e+=""),c(e),g=!0,e="abort("+e+"). Build with -s ASSERTIONS=1 for more info.",new WebAssembly.RuntimeError(e)}function B(e){return String.prototype.startsWith?e.startsWith("data:application/octet-stream;base64,"):0===e.indexOf("data:application/octet-stream;base64,")}a.preloadedImages={},a.preloadedAudios={};var C,H="avc.wasm";function T(){try{if(d)return new Uint8Array(d);if(o)return o(H);throw"both async and sync fetching of the wasm failed"}catch(e){x(e)}}B(H)||(C=H,H=a.locateFile?a.locateFile(C,u):u+C),a.asm=function(){var e={env:L,wasi_unstable:L,global:{NaN:NaN,Infinity:1/0},"global.Math":Math,asm2wasm:p};function n(e,n){var t=e.exports;a.asm=t,function(e){if(E--,a.monitorRunDependencies&&a.monitorRunDependencies(E),0==E&&(null!==I&&(clearInterval(I),I=null),O)){var n=O;O=null,n()}}()}function t(e){n(e.instance)}function r(n){return(d||"function"!=typeof fetch?new Promise((function(e,n){e(T())})):fetch(H,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+H+"'";return e.arrayBuffer()})).catch((function(){return T()}))).then((function(n){return WebAssembly.instantiate(n,e)})).then(n,(function(e){c("failed to asynchronously prepare wasm: "+e),x(e)}))}if(E++,a.monitorRunDependencies&&a.monitorRunDependencies(E),a.instantiateWasm)try{return a.instantiateWasm(e,n)}catch(e){return c("Module.instantiateWasm callback failed with error: "+e),!1}return function(){if(d||"function"!=typeof WebAssembly.instantiateStreaming||B(H)||"function"!=typeof fetch)return r(t);fetch(H,{credentials:"same-origin"}).then((function(n){return WebAssembly.instantiateStreaming(n,e).then(t,(function(e){c("wasm streaming compile failed: "+e),c("falling back to ArrayBuffer instantiation"),r(t)}))}))}(),{}};var W={buffers:[null,[],[]],printChar:function(e,n){var t=W.buffers[e];0===n||10===n?((1===e?s:c)(A(t,0)),t.length=0):t.push(n)},varargs:0,get:function(e){return W.varargs+=4,m[W.varargs-4>>2]},getStr:function(){var e,n;return(e=W.get())?A(v,e,n):""},get64:function(){var e=W.get();return W.get(),e},getZero:function(){W.get()}};function j(e,n,t,r){try{for(var a=0,i=0;i<t;i++){for(var o=m[n+8*i>>2],f=m[n+(8*i+4)>>2],u=0;u<f;u++)W.printChar(e,v[o+u]);a+=f}return m[r>>2]=a,0}catch(e){return"undefined"!=typeof FS&&e instanceof FS.ErrnoError||x(e),e.errno}}function F(){n()}function N(e,n,r){t(e,n,r)}a._broadwayOnHeadersDecoded=F,a._broadwayOnPictureDecoded=N;var k,z,L={g:function(){return j.apply(null,arguments)},__memory_base:1024,__table_base:0,f:F,e:N,b:function(){return h.length},d:function(e,n,t){v.set(v.subarray(n,n+t),e)},a:function(e){x("OOM")},c:x,memory:l,table:b},q=a.asm({},L,y);function G(e){function n(){k||(k=!0,g||(D(S),D(R),a.onRuntimeInitialized&&a.onRuntimeInitialized(),function(){if(a.postRun)for("function"==typeof a.postRun&&(a.postRun=[a.postRun]);a.postRun.length;)e=a.postRun.shift(),U.unshift(e);var e;D(U)}()))}e=e||f,E>0||(function(){if(a.preRun)for("function"==typeof a.preRun&&(a.preRun=[a.preRun]);a.preRun.length;)e=a.preRun.shift(),_.unshift(e);var e;D(_)}(),E>0||(a.setStatus?(a.setStatus("Running..."),setTimeout((function(){setTimeout((function(){a.setStatus("")}),1),n()}),1)):n()))}if(a.asm=q,a._broadwayCreateStream=function(){return a.asm.h.apply(null,arguments)},a._broadwayExit=function(){return a.asm.i.apply(null,arguments)},a._broadwayGetMajorVersion=function(){return a.asm.j.apply(null,arguments)},a._broadwayGetMinorVersion=function(){return a.asm.k.apply(null,arguments)},a._broadwayInit=function(){return a.asm.l.apply(null,arguments)},a._broadwayPlayStream=function(){return a.asm.m.apply(null,arguments)},a.asm=q,O=function e(){k||G(),k||(O=e)},a.run=G,a.preInit)for("function"==typeof a.preInit&&(a.preInit=[a.preInit]);a.preInit.length>0;)a.preInit.pop()();G(),void 0!==e&&e.Module&&(z=e.Module),void 0!==a&&(z=a),z._broadwayOnHeadersDecoded=n,z._broadwayOnPictureDecoded=t;var V,X=!1;return z.onRuntimeInitialized=function(){X=!0,V&&V(z)},function(e){X?e(z):V=e}};return function(){"use strict";var t=function(){return(new Date).getTime()};"undefined"!=typeof performance&&performance.now&&(t=function(){return performance.now()});var r=function(e){var r;this.options=e||{},this.now=t;var a,o,f=function(e,n,o){var f,u=this.pictureBuffers[e];u||(u=this.pictureBuffers[e]=a(e,n*o*3/2));var s=!1;if(this.infoAr.length&&(s=!0,f=this.infoAr),this.infoAr=[],this.options.rgb){r||(r=i(n,o)),r.inp.set(u),r.doit();var c=new Uint8Array(r.outSize);return c.set(r.out),s&&(f[0].finishDecoding=t()),void this.onPictureDecoded(c,n,o,f)}s&&(f[0].finishDecoding=t()),this.onPictureDecoded(u,n,o,f)}.bind(this);this.options.sliceMode&&(f=function(e,n,r,i){var f=this.pictureBuffers[e];f||(f=this.pictureBuffers[e]=a(e,n*r*3/2));var u,s=this.pictureBuffers[i];s||(s=this.pictureBuffers[i]=o(i,18)),this.infoAr.length&&(u=this.infoAr),this.infoAr=[],u[0].finishDecoding=t();for(var c=[],d=0;d<20;++d)c.push(s[d]);u[0].sliceInfoAr=c,this.onPictureDecoded(f,n,r,u)}.bind(this));var u=n.apply({},[function(){},f]),s=this;this.onPictureDecoded=function(e,n,t,r){},this.onDecoderReady=function(){};var c=[];this.decode=function(e,n,t){c.push([e,n,t])},u((function(e){e.HEAP8;var n=e.HEAPU8;e.HEAP16,e.HEAP32,e._broadwayInit(),a=function(e,t){return n.subarray(e,e+t)},o=function(e,t){return new Uint32Array(n.buffer,e,t)},s.streamBuffer=a(e._broadwayCreateStream(1048576),1048576),s.pictureBuffers={},s.infoAr=[];var r=0;if(s.options.sliceMode?(r=s.options.sliceNum,s.decode=function(n,a,i){s.infoAr.push(a),a.startDecoding=t();var o,f=a.nals;if(!f){f=[],a.nals=f;var u=n.length,c=!1,d=0,l=0;for(o=0;o<u;++o)if(1===n[o]&&0===n[o-1]&&0===n[o-2]){var p=o-2;0===n[o-3]&&(p=o-3),c&&f.push({offset:d,end:p,type:31&n[l]}),d=p,l=p+3,0===n[o-3]&&(l=p+4),c=!0}c&&f.push({offset:d,end:o,type:31&n[l]})}var y,h=0,v=0;for(o=0;o<f.length;++o)1===f[o].type||5===f[o].type?(h===r&&(y=n.subarray(f[o].offset,f[o].end),s.streamBuffer[v]=0,v+=1,s.streamBuffer.set(y,v),v+=y.length),h+=1):(y=n.subarray(f[o].offset,f[o].end),s.streamBuffer[v]=0,v+=1,s.streamBuffer.set(y,v),v+=y.length,e._broadwayPlayStream(v),v=0);i(),e._broadwayPlayStream(v)}):s.decode=function(n,r){r&&(s.infoAr.push(r),r.startDecoding=t()),s.streamBuffer.set(n),e._broadwayPlayStream(n.length)},c.length){var i=0;for(i=0;i<c.length;++i)s.decode(c[i][0],c[i][1],c[i][2]);c=[]}s.onDecoderReady(s)}))};r.prototype={};var a={},i=function(n,t){var r=n+"x"+t;if(a[r])return a[r];for(var i=n*t,o=(0|i)>>2,f=i+o+o,u=n*t*4,s=f+u+4*Math.pow(2,24),c=Math.pow(2,24),d=c;d<s;)d+=c;var l=new ArrayBuffer(d),p=function(e,n,t){"use asm";var r=e.Math.imul,a=e.Math.min,i=e.Math.max,o=e.Math.pow,f=new e.Uint8Array(t),u=new e.Uint32Array(t),s=new e.Uint8Array(t),c=new e.Uint8Array(t),d=new e.Uint32Array(t),l=0,p=0,y=0,h=0,v=0,m=0,b=0,g=0,w=0,A=0;function M(e,n){e=e|0;n=n|0;var t=0;var a=0;l=e;w=r(e,4)|0;p=n;y=r(l|0,p|0)|0;h=(y|0)>>2;m=r(r(l,p)|0,4)|0;v=(y+h|0)+h|0;g=0;b=g+m|0;A=b+v|0;a=~~+o(+2,+24);a=r(a,4)|0;for(t=0|0;(t|0)<(a|0)|0;t=t+4|0){d[(A+t|0)>>2]=0}}function P(){var e=0;var n=0;var t=0;var r=0;var a=0;var i=0;var o=0;var f=0;var u=0;var c=0;var v=0;var m=0;var M=0;var P=0;M=g|0;e=b|0;n=e+y|0|0;t=n+h|0;for(u=0;(u|0)<(p|0);u=u+2|0){v=n;m=t;for(c=0;(c|0)<(l|0);c=c+2|0){r=s[e>>0]|0;a=s[(e+l|0)>>0]|0;i=s[n>>0]|0;o=s[t>>0]|0;P=((r<<16|0)+(i<<8|0)|0)+o|0;f=d[(A>>2)+P|0]|0;if(f){}else{f=D(r,i,o)|0;d[(A>>2)+P|0]=f|0}d[M>>2]=f;P=((a<<16|0)+(i<<8|0)|0)+o|0;f=d[(A>>2)+P|0]|0;if(f){}else{f=D(a,i,o)|0;d[(A>>2)+P|0]=f|0}d[(M+w|0)>>2]=f;M=M+4|0;e=e+1|0;r=s[e>>0]|0;a=s[(e+l|0)>>0]|0;P=((r<<16|0)+(i<<8|0)|0)+o|0;f=d[(A>>2)+P|0]|0;if(f){}else{f=D(r,i,o)|0;d[(A>>2)+P|0]=f|0}d[M>>2]=f;P=((a<<16|0)+(i<<8|0)|0)+o|0;f=d[(A>>2)+P|0]|0;if(f){}else{f=D(a,i,o)|0;d[(A>>2)+P|0]=f|0}d[(M+w|0)>>2]=f;M=M+4|0;e=e+1|0;n=n+1|0;t=t+1|0}M=M+w|0;e=e+l|0}}function D(e,n,t){e=e|0;n=n|0;t=t|0;var o=0;var f=0;var u=0;var s=0;var c=0;var d=0;var l=0;var p=0;var y=0;c=r(1192,e-16|0)|0;d=r(1634,t-128|0)|0;l=r(832,t-128|0)|0;p=r(400,n-128|0)|0;y=r(2066,n-128|0)|0;o=(c+d|0)>>10|0;f=((c-l|0)-p|0)>>10|0;u=(c+y|0)>>10|0;if((o&255|0)!=(o|0)|0){o=a(255,i(0,o|0)|0)|0}if((f&255|0)!=(f|0)|0){f=a(255,i(0,f|0)|0)|0}if((u&255|0)!=(u|0)|0){u=a(255,i(0,u|0)|0)|0}s=255;s=s<<8|0;s=s+u|0;s=s<<8|0;s=s+f|0;s=s<<8|0;s=s+o|0;return s|0}return{init:M,doit:P}}(e,{},l);return p.init(n,t),a[r]=p,p.heap=l,p.out=new Uint8Array(l,0,u),p.inp=new Uint8Array(l,u,f),p.outSize=u,p};if("undefined"!=typeof self){var o,f,u,s,c,d,l=!1,p=!1,y=!1,h=0,v=0,m=0,b=0,g=[],w=[],A=function(e){if(w.length){for(var n=w.shift();n&&n.byteLength!==e;)n=w.shift();if(n)return n}return new ArrayBuffer(e)},M=function(e,n,t,r,a){var i=function(t,a){var i=0;for(i=0;i<16;++i){var o=t+r*i,f=a+r*i;n.set(e.subarray(o,f),o)}},o=function(t,a){var i=0;for(i=0;i<8;++i){var o=t+r/2*i,f=a+r/2*i;n.set(e.subarray(o,f),o)}},f=function(t,r){n.set(e.subarray(t,r),t)},u=t[0],s=t[1];s>0&&(i(u,s),o(t[2],t[3]),o(t[4],t[5])),u=t[6],(s=t[7])>0&&(i(u,s),o(t[8],t[9]),o(t[10],t[11])),u=t[12],(s=t[15])>0&&(f(u,s),f(t[13],t[16]),f(t[14],t[17]))},P=function(e){m=(v=e)-1};self.addEventListener("message",(function(e){if(l){if(p&&e.data.reuse&&w.push(e.data.reuse),e.data.buf)return void(y&&0!==b?g.push(e.data):o.decode(new Uint8Array(e.data.buf,e.data.offset||0,e.data.length),e.data.info,(function(){y&&h!==m&&postMessage(e.data,[e.data.buf])})));if(e.data.slice){var n=t();if(M(new Uint8Array(e.data.slice),u,e.data.infos[0].sliceInfoAr,e.data.width,e.data.height),e.data.theOne&&(M(u,new Uint8Array(e.data.slice),f,e.data.width,e.data.height),d>e.data.infos[0].timeDecoding&&(e.data.infos[0].timeDecoding=d),e.data.infos[0].timeCopy+=t()-n),postMessage(e.data,[e.data.slice]),0==(b-=1)&&g.length){var a=g.shift();o.decode(new Uint8Array(a.buf,a.offset||0,a.length),a.info,(function(){y&&h!==m&&postMessage(a,[a.buf])}))}return}if(e.data.setSliceCnt)return void P(e.data.sliceCnt)}else e.data&&"Broadway.js - Worker init"===e.data.type&&(l=!0,o=new r(e.data.options),e.data.options.sliceMode?(p=!0,y=!0,h=e.data.options.sliceNum,P(e.data.options.sliceCnt),o.onPictureDecoded=function(e,n,t,r){var a=new Uint8Array(A(e.length));M(e,a,r[0].sliceInfoAr,n),s=r[0].startDecoding,c=r[0].finishDecoding,d=c-s,r[0].timeDecoding=d,r[0].timeCopy=0,postMessage({slice:a.buffer,sliceNum:h,width:n,height:t,infos:r},[a.buffer]),b=v-1,u=e,f=r[0].sliceInfoAr}):e.data.options.reuseMemory?(p=!0,o.onPictureDecoded=function(e,n,t,r){var a=new Uint8Array(A(e.length));a.set(e,0,e.length),postMessage({buf:a.buffer,length:e.length,width:n,height:t,infos:r},[a.buffer])}):o.onPictureDecoded=function(e,n,t,r){e&&(e=new Uint8Array(e));var a=new Uint8Array(e.length);a.set(e,0,e.length),postMessage({buf:a.buffer,length:e.length,width:n,height:t,infos:r},[a.buffer])},postMessage({consoleLog:"broadway worker initialized"}))}),!1)}return r.nowValue=t,r}()})?r.apply(n,a):r)||(e.exports=i)}]);
//# sourceMappingURL=Decoder.worker.js.map