cvat:
  backend:
    defaultStorage:
      accessModes:
      - ReadWriteOnce
    server:
      additionalVolumeMounts:
      - mountPath: /home/django/share
        name: cvat-backend-data
        subPath: share
      additionalEnv:
        - name: DJANGO_SETTINGS_MODULE
          value: cvat.settings.testing_rest
    worker:
      analytics_reports:
        replicas: 0
      annotation:
        replicas: 0
      chunks:
        replicas: 0
      consensus:
        replicas: 0
      export:
        replicas: 0
      import:
        replicas: 0
      webhooks:
        replicas: 0
      utils:
        replicas: 1
        additionalEnv:
          - name: DJANGO_SETTINGS_MODULE
            value: cvat.settings.testing_rest
          - name: CLICKHOUSE_HOST
            valueFrom:
              secretKeyRef:
                name: cvat-analytics-secret
                key: CLICKHOUSE_HOST
          - name: CLICKHOUSE_PORT
            valueFrom:
              secretKeyRef:
                name: cvat-analytics-secret
                key: CLICKHOUSE_PORT
          - name: CLICKHOUSE_USER
            valueFrom:
              secretKeyRef:
                name: cvat-analytics-secret
                key: CLICKHOUSE_USER
          - name: CLICKHOUSE_PASSWORD
            valueFrom:
              secretKeyRef:
                name: cvat-analytics-secret
                key: CLICKHOUSE_PASSWORD
        additionalVolumeMounts:
        - mountPath: /home/django/share
          name: cvat-backend-data
          subPath: share
        args:
        - "run"
        - "worker"
        - "annotation"
        - "chunks"
        - "cleaning"
        - "consensus"
        - "export"
        - "import"
        - "notifications"
        - "quality_reports"
        - "webhooks"

    # Images are already present in the node
    imagePullPolicy: Never
  frontend:
    imagePullPolicy: Never

redis:
  master:
    # The "flushall" command, which we use in tests, is disabled in helm by default
    # https://artifacthub.io/packages/helm/bitnami/redis#redis-master-configuration-parameters
    disableCommands: []

keydb:
  resources:
    requests:

traefik:
  logs:
    general:
      level: DEBUG
    access:
      enabled: true

